<!DOCTYPE html>
<html>

<head>
    <title> BASE FILE DO NOT TOUCH - CSV File to HTML Table Using AJAX jQuery</title>
    <!-- All local includes -->
    <script src="./scripts/jquery.min.js"></script>
    <link rel="stylesheet" href="./styles/bootstrap.css" />
    <script src="./scripts/bootstrap.min.js"></script>

</head>

<body>
    <div class="container">
        <div class="table-responsive">
            <h1 align="center">Outlet Name Goes Here</h1>
            <br />
            <div align="center">
                <button type="button" name="load_data" id="load_data" class="btn btn-info">Load Data</button>
            </div>
            <br />
            <div id="employee_table">
            </div>
        </div>
    </div>

    <includes>

    </includes>


</body>

</html>

<script>
    // JS HTML DOM document object is the owner of all other objects in page
    // .ready() offers a way to run JS code as soon as page's (DOM) becomes safe to manipulate.
    // Ready Click and Ajax are all functions of jQuery
    $(document).ready(function () {
        $('#load_data').click(function () {
            $.ajax({
                url: "sampledata.csv", //pair is: a url and its target
                dataType: "text",       // pair is: a dataType and the type of data to expect
                success: function (data) { //success will run a function when the pairs above resolve successfully

                    var menu_data = data.split(/\r?\n|\r/); // split file into entries by linebreak

                    var table_data = '<table class="table table-bordered table-striped">';

                    for (var count = 0; count < menu_data.length; count++) { //loop to iterate through the length of the array
                        var cell_data = menu_data[count].split(",");        //split the current index into the separated values for this entry
                        table_data += '<tr>';                               // append a table row tag to the beginning of the entry data
                        for (var cell_count = 0; cell_count < cell_data.length; cell_count++) { //loop to iterate through each piece of data in the single entry
                            if (count === 0) {
                                table_data += '<th>' + cell_data[cell_count] + '</th>'; //Create the table header from the first piece of data in the entry
                            }
                            else {
                                table_data += '<td>' + cell_data[cell_count] + '</td>';// The rest of the entry data will be table detail panels
                            }
                        }
                        table_data += '</tr>'; //after each loop iteration, close the row
                    }
                    table_data += '</table>';   //after data is processed, close the table
                    $('#employee_table').html(table_data);  //select the table element by ID on the page and write all of this text to the page asynchronously
                }
            });
        });

    });
</script>